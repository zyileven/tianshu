# MinerU Tianshu - Environment Configuration
# 天枢环境配置示例
# 复制此文件为 .env 并修改配置

# ============================================================================
# API Server Configuration
# ============================================================================
API_PORT=8000
WORKERS_PER_DEVICE=2
GPU_DEVICES=0

# ============================================================================
# Authentication & Authorization
# ============================================================================
# JWT Secret Key (生产环境必须修改!)
JWT_SECRET_KEY=your-super-secret-key-change-in-production-min-32-chars

# JWT Token 过期时间 (分钟)
JWT_EXPIRE_MINUTES=1440  # 24 hours

# ============================================================================
# SSO Integration (Optional)
# ============================================================================
# 启用 SSO 登录
SSO_ENABLED=false

# SSO 类型: oidc / saml
SSO_TYPE=oidc

# -------------------- OIDC Configuration --------------------
# OpenID Connect (例如: Keycloak, Auth0, Okta)
SSO_CLIENT_ID=your-oidc-client-id
SSO_CLIENT_SECRET=your-oidc-client-secret
SSO_ISSUER_URL=https://auth.example.com/realms/your-realm
SSO_REDIRECT_URI=http://localhost:8000/api/v1/auth/sso/callback

# -------------------- SAML Configuration --------------------
# SAML 2.0 (例如: Azure AD, OneLogin)
SSO_ENTITY_ID=https://idp.example.com
SSO_SSO_URL=https://idp.example.com/sso
SSO_X509_CERT=MIIC...your-certificate...
SSO_SP_ENTITY_ID=http://localhost:8000/metadata
SSO_SP_ACS_URL=http://localhost:8000/api/v1/auth/sso/callback

# ============================================================================
# MinIO Object Storage (Optional)
# ============================================================================
MINIO_ENDPOINT=minio.example.com
MINIO_ACCESS_KEY=your-access-key
MINIO_SECRET_KEY=your-secret-key
MINIO_BUCKET=mineru-tianshu

# ============================================================================
# MCP Protocol (Optional)
# ============================================================================
MCP_HOST=0.0.0.0
MCP_PORT=8001

# ============================================================================
# Database
# ============================================================================
# SQLite database file path (relative to backend/)
DB_PATH=mineru_tianshu.db

# ============================================================================
# Task Scheduler (Optional)
# ============================================================================
SCHEDULER_ENABLED=true
CLEANUP_INTERVAL_HOURS=24
CLEANUP_RETENTION_DAYS=7

# ============================================================================
# Redis Queue (Optional - 高性能任务队列)
# ============================================================================
# 启用 Redis 队列（解决 SQLite 单写锁瓶颈）
REDIS_QUEUE_ENABLED=false

# Redis 连接配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis 队列 Key 前缀
REDIS_QUEUE_KEY=tianshu:task_queue
REDIS_PROCESSING_KEY=tianshu:processing

# 任务超时时间（秒）- 超时任务自动重新入队
REDIS_TASK_TIMEOUT=3600
